# Руководство по неймингу всего

Общая конвенция по неймингу от Oracle: https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html

## Общие рекомендации
- Все имена файлов/пакетов/классов/методов/переменных и т.д. должны быть на английском языке
- Хорошее имя должно быть **конкретным** - если вы можете назвать несколько сущностей таким именем, значит оно слишком общее
- Хорошее имя должно быть **понятным** без комментариев
- Хорошее имя дает ответы на вопросы:
  - Что это делает/хранит?
  - Почему это существует?
  - Как это используется?

## Имена пакетов

- `lowercase`, без подчеркиваний и дефисов, словосочетания склеиваются в одно слово
- **Базовый пакет** должен начинаться с group-id проекта, последним элементом должно быть представлено имя микросервиса:
  - `ru.panyukovnn.paymentlimit`
- не используются аббревиатуры: `controller` вместо `ctrl`, `exception` вместо `ex`
- подпакеты создавайте для логической группировки: `dto.user`, `dto.payment`, `model.transaction`
- один уровень вложенности для простых группировок, больше - только при явной необходимости

### Структура пакетов проекта
```
ru.panyukovnn.paymentlimit
├── aspect          - аспекты
├── client          - классы клиентов для запросов внешних сервисов
├── config          - конфигурационные классы 
├── controller      - REST контроллеры
├── dto             - объекты передачи данных
│   ├── common      - общие DTO
│   └── payment     - DTO для платежей
├── exception       - кастомные исключения
├── listener        - слушатели событий (например, Kafka)
├── mapper          - служебные классы для маппинга сущностей (например, MapStruct)
├── model           - JPA сущности (entities)
│   └── transaction - сущности, связанные с транзакциями пользователей
├── property        - классы для настроек приложения
├── repository      - репозитории
├── scheduler       - планируемые задачи
├── service         - сервисный слой
│   └── domain      - доменные сервисы (инкапсулируют вызовы репозиториев)
├── util            - утилиты и константы
└── webfilter       - web-фильтры
```

## Имена методов

- `camelCase`
- глагол - обозначает действие, которое будет выполнено методом

### Примеры
  - `handleApproval()`
  - `createResponse()`
  - `prepareQuery()`
  - `findByOrderId()`
  - `validateTransaction()`
  - `deleteAllByLastUpdateTimeIsBefore()`

### Примеры глаголов
- `get`, `set` - для геттеров и сеттеров
- `handle`, `process`, `calculate` - общая обработка
- `find`, `fetch`, `extract`, `search` - получение данных
- `create`, `save`, `build` - создание/сохранение
- `update`, `enrich` - обновление полей
- `delete`, `remove` - удаление
- `validate`, `check` - валидация данных, методы с таким названием либо ничего не возвращают в результате, либо возвращают boolean
- `is`, `has` - проверка состояния (возвращает boolean)

---

## Имена методов в тестах

- название теста должно соответствовать содержанию
- каждая команда/разработчик выбирают свой стиль нейминга, не нарушающий общепринятых конвенций: https://dzone.com/articles/7-popular-unit-test-naming
- в рамках одного проекта следует поддерживать единый стиль

Рекоммендуемый паттетн: **when_имяТестируемогоМетода_опцинальноеУсловие_then_ожидаемый_результат**

### Примеры

- when_postPayment_thne_success
- when_findUsers_filteredByName_then_success
- when_sendNotification_withoutEmail_then_illegalArgumentsException

---

## Имена локальных переменных и полей класса

- `camelCase`
- существительное - отражает для чего предназначены хранимые в нем данные
- не стоит именовать поле по его содержимому, например: 
  - `private String TOKEN = "token";` - в названии обозначается содержимое
  - правильный вариант:
  - `private String USER_TOKEN_CONTEXT_KEY = "token";` - название обозначает, что содержимое является ключом в контексте
- в названии не следует обозначать его тип (например, не `string`, `int` и т.д.), исключение составляют коллекции и map
- если в поле хранится коллекция (список, множество), то следует именовать во множественном числе
- если в поле хранится временной интервал, то следует обозначать единицы времени:
  - `private Integer ttlHours;`
- boolean переменные не должны иметь префиксов `is`, `has`
- следует использовать полные имена, избегать сокращений и аббревиатур (разрешены общеупотребительные `id`, `url`, `dto`)
- для циклов допустимы короткие имена: `i`, `j`

### Примеры
- `private UUID id;`
- `private BigDecimal currentAmount;`
- `private LocalDateTime startTime;`
- `private Boolean active;`
- `BigDecimal previousAmount = ...`
- `int removedRecordsNumber = 0;`

---

## Имена классов и интерфейсов

- `PascalCase` (каждое слово с заглавной буквы)
- существительное - обозначающее доменную область
- название класса должно быть уникальным в рамках проекта
- название класса должно отражать его назначение
- названия классов тестов должны полностью совпадать с названием тестируемых классов с добавлением суффикса `Test`
- названия классов сущностей **должны** совпадать с названиями таблиц в БД, в случаях конфликта имён допускается `*Entity`
- названия классов исключений **должны** заканчиваться суффиксом `*Exception`
- названия enum'ов **не должны** заканчиваться на `*Enum`
- названия record'ов **не должны** заканчиваться на `*Record`
- **избегать** общеупотребительных слов: `Helper`, `Manager`, `Service`, `Scheduler` и т.д.
- **избегать** имен классов из библиотек: `ExceptionHander`, `Controller`, `Validator`, `KafkaListener` и т.д.
- **избегать** слшиком общих имен, которые можно дать множеству классов: `KafkaRequest`, `ServiceResponse`, `Processor`

### Примеры

- `PaymentController` - контроллер для обработки запросов платежей
- `TransactionService` - сервис для работы с транзакциями клиентов
- `OperationLimitDomainService` - доменный сервис, инкапсулирующий логику вызова репозиториев для работы с сущностью OperationLimit
- `CounterRepository` - репозиторий для работы с сущностью Counter
- `MdmEventListener` - слушатель событий кафки для обработки сообщений MDM
- `RemoveOldLinkInfosJob` - планировщик для удаления устаревших записей из таблицы link_info
- `MdcConstants` - класс с константами для работы с контекстом MDC
- `JsonUtil` - утилитарный класс для работы с JSON

##### Примеры имен Dto (Data Transfer Objects) классов и record'ов

- `PaymentRequest` - входящие данные для создания платежа
- `RecipientDto` - информация о получателе платежа

#### Примеры имен классов сущностей (Entities)

- `Partner` - для таблицы `partner`
- `TransactionCounters` - для таблицы `transaction_counters`
- `OperationType` - для таблицы `operation_type`

#### Примеры имен классов Исключений

- `BusinessException`
- `LimitExceededException`
- `NotFoundException`

#### Примеры имен классов Конфигурации и Настроек

- `MdmExecutorsConfig`
- `ShedlockConfig`
- `RemoveOldQuotationsJobProperty`
- `PaymentLimitProperty`

#### Примеры имен enum'ов

- `PaymentStatus`
- `TransactionCategory`
- `CounterType`

#### Примеры имен классов тестов

- `PaymentControllerTest` - тесты для `PaymentController`
- `RedisCacheTest` - интеграционные тесты кеша

